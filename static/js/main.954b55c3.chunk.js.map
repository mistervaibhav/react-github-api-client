{"version":3,"sources":["hooks/useOrgsSearch.jsx","components/modal/Modal.jsx","components/item/Item.jsx","pages/App.jsx","index.js"],"names":["useOrgsSearch","org","page","useState","repos","setRepos","hasMore","setHasMore","loading","setLoading","error","setError","useEffect","cancel","axios","method","url","cancelToken","CancelToken","c","then","res","prevRepos","data","length","catch","isCancel","Modal","forwardRef","props","ref","repo","display","setDisplay","close","document","body","style","overflow","console","log","useImperativeHandle","openModal","closeModal","ReactDOM","createPortal","className","full_name","onClick","owner","login","license","name","description","pushed_at","id","size","default_branch","forks","language","stargazers_count","watchers","permissions","admin","toString","pull","push","getElementById","Item","modalRef","useRef","current","open_issues","href","App","setOrg","setPage","observer","lastRepoRef","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","placeholder","type","value","onChange","event","target","map","index","key","render","StrictMode"],"mappings":"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","file":"static/js/main.954b55c3.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst useOrgsSearch = (org, page) => {\r\n  const [repos, setRepos] = useState([]);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setRepos([]);\r\n  }, [org]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n    let cancel;\r\n    axios({\r\n      method: 'GET',\r\n      url: `https://api.github.com/orgs/${org}/repos?page=${page}&per_page=10`,\r\n      cancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n    })\r\n      .then((res) => {\r\n        setRepos((prevRepos) => {\r\n          return [...prevRepos, ...res.data];\r\n        });\r\n        setHasMore(res.data.length > 0);\r\n        setLoading(false);\r\n        // console.log(res.data);\r\n      })\r\n      .catch((error) => {\r\n        setError(true);\r\n        if (axios.isCancel(error)) {\r\n          return;\r\n        }\r\n      });\r\n    return () => cancel();\r\n  }, [org, page]);\r\n\r\n  return { repos, hasMore, loading, error };\r\n};\r\n\r\nexport default useOrgsSearch;\r\n","import React, { useState, forwardRef, useImperativeHandle } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './modal.scss';\r\n\r\nconst Modal = forwardRef((props, ref) => {\r\n  const { repo } = props;\r\n\r\n  const [display, setDisplay] = useState(false);\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      openModal: () => open(),\r\n      closeModal: () => close(),\r\n    };\r\n  });\r\n\r\n  function open() {\r\n    setDisplay(true);\r\n    document.body.style.overflow = 'hidden';\r\n    console.log('Modal opened');\r\n  }\r\n\r\n  function close() {\r\n    setDisplay(false);\r\n    document.body.style.overflow = 'unset';\r\n    console.log('Modal closed');\r\n  }\r\n\r\n  if (display) {\r\n    return ReactDOM.createPortal(\r\n      <div className='modal-wrapper'>\r\n        <div className='modal-backdrop' />\r\n        <section className='modal-box'>\r\n          <header className='modal-header'>\r\n            <div className='top'>\r\n              <p className='heading'>{repo.full_name}</p>\r\n              <button className='close-button' onClick={close}>\r\n                Close\r\n              </button>\r\n            </div>\r\n            <div className='sub-heading-container'>\r\n              <p className='sub-heading'>Owned by : {repo.owner.login} </p>\r\n              {repo.license && <p className='sub-heading'>License : {repo.license.name} </p>}\r\n            </div>\r\n          </header>\r\n          <main className='modal-main'>\r\n            <p className='property'>Description : {repo.description}</p>\r\n            <p className='property'>Pushed at : {repo.pushed_at}</p>\r\n            <p className='property'>Id : {repo.id}</p>\r\n            <p className='property'>Size : {repo.size} KB</p>\r\n            <p className='property'>Default Branch : {repo.default_branch}</p>\r\n            <p className='property'>Forks : {repo.forks}</p>\r\n            <p className='property'>Language : {repo.language}</p>\r\n            <p className='property'>Stargazers : {repo.stargazers_count}</p>\r\n            <p className='property'>Watchers : {repo.watchers}</p>\r\n          </main>\r\n          <footer className='modal-footer'>\r\n            <div className={`permission ${repo.permissions.admin.toString()}`}>Admin</div>\r\n            <div className={`permission ${repo.permissions.pull.toString()}`}>Pull</div>\r\n            <div className={`permission ${repo.permissions.push.toString()}`}>Push</div>\r\n          </footer>\r\n        </section>\r\n      </div>,\r\n      document.getElementById('modal-root')\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n});\r\n\r\nexport default Modal;\r\n","import React, { useRef, forwardRef } from 'react';\r\nimport './item.scss';\r\nimport Modal from '../modal/Modal';\r\n\r\nconst Item = forwardRef((props, ref) => {\r\n  const { repo } = props;\r\n\r\n  const modalRef = useRef();\r\n\r\n  function openModal() {\r\n    modalRef.current.openModal();\r\n    console.log(repo);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <section className='item' ref={ref} onClick={openModal}>\r\n        <header className='item-header'>\r\n          <p className='name'>{repo.name}</p>\r\n          <p className='description'>{repo.description}</p>\r\n        </header>\r\n        <main className='item-main'>\r\n          <p className='property'>Open Issues : {repo.open_issues}</p>\r\n          <p className='property'>Language : {repo.language}</p>\r\n        </main>\r\n        <footer className='item-footer'>\r\n          <a href={repo.url}>{repo.url}</a>\r\n        </footer>\r\n      </section>\r\n      <Modal ref={modalRef} repo={repo} />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Item;\r\n","import React, { useState, useRef, useCallback } from 'react';\nimport useOrgsSearch from '../hooks/useOrgsSearch';\nimport Item from '../components/item/Item';\nimport './style.scss';\n//import { Loading } from '../assets/Loading';\n\nconst App = () => {\n  const [org, setOrg] = useState('octokit');\n  const [page, setPage] = useState(1);\n\n  const { repos, hasMore, loading, error } = useOrgsSearch(org, page);\n\n  // console.log(repos);\n  // console.log(hasMore);\n  // console.log(loading);\n  // console.log(error);\n\n  const observer = useRef();\n  const lastRepoRef = useCallback(\n    (node) => {\n      if (loading) {\n        return;\n      }\n      if (observer.current) {\n        observer.current.disconnect();\n      }\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setPage((prevPage) => prevPage + 1);\n        }\n      });\n      if (node) {\n        observer.current.observe(node);\n      }\n      // console.log(node);\n    },\n    [loading, hasMore]\n  );\n\n  function handleSearch(event) {\n    setOrg(event.target.value);\n    setPage(1);\n  }\n\n  return (\n    <div className='home'>\n      <header className='home-header'>\n        <input\n          placeholder='Ex Octokit'\n          className='search'\n          type='text'\n          value={org}\n          onChange={handleSearch}\n        />\n        {/* <p className='loading'>{loading ? 'Loading...' : 'Loaded'}</p> */}\n      </header>\n      <main className='home-main'>\n        {repos.map((repo, index) => {\n          if (repos.length === index + 1) {\n            return <Item ref={lastRepoRef} key={repo.id} repo={repo} />;\n          } else {\n            return <Item key={repo.id} repo={repo} />;\n          }\n        })}\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './pages/App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}